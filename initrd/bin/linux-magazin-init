#!/bin/sh
# Example script for the Linux-Magazin

. /etc/functions
. /etc/config

echo "Die folgenden Treiber sind bei Heads als Module gebaut. Im Artikel sind sie direkt in den Kernel gebaut und müssen nicht geladen werden." 
echo ""
echo "#insmod /lib/modules/libata.ko"
echo "#insmod /lib/modules/libahci.ko"
echo "#insmod /lib/modules/ahci.ko"
echo ""

echo "Willkommen im Initrd für den Coreboot-Artikel im Linux-Magazin."
echo "Ihnen steht jetzt eine BusyBox-Umgebung mit all den Möglichkeiten zur Verfügung. Das heißt, Sie haben Zugriff auf alle Treiber (Dateisystem, Netzwerk, WLAN, …) und können ganz normal Skripte und Programme (SSH, …) benutzen und schreiben."
echo ""
echo "Wie im Artikel beschrieben, können Sie '/dev/sda1', auf der Debian installiert ist, unter '/boot' einbinden und den Debian-Linux-Kernel mit 'kexec' laden und starten."
echo ""
echo "mount /dev/sda1 /boot"
echo "cd /boot/boot"
echo "kexec -l vmlinuz-4.16.0-1-amd64 --append="root=/dev/sda1 console=ttyS0,115200 console=tty0 iomem=relaxed" --initrd=initrd.img-4.16.0-1-amd64"
echo "kexec -e"

recovery "Starte Shell"

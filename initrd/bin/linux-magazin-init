#!/bin/sh
# Boot from a local disk installation

. /etc/functions
. /etc/config

mount_boot()
{
	# Mount local disk if it is not already mounted
	if ! grep -q /boot /proc/mounts ; then
		mount -o ro /boot \
			|| recovery "Unable to mount /boot"
	fi
}


# Confirm we have a good TOTP unseal and ask the user for next choice
echo "Willkommen im initrd für den Coreboot-Artikel im Linux-Magazin."
echo "Ihnen steht jetzt eine BusyBox-Umgebung zur Verfügung und Ihnen stehen alle Möglichkeiten offen."
echo ""
echo "Wie im Artikel beschrieben, können Sie '/dev/sda1' mit der Debian-Installation unter '/boot' einbinden und den enthaltenen Linux-Kernel mit 'kexec' laden und starten."
echo ""
echo "mount /dev/sda1 /boot"
echo "cd /boot/boot"
echo "kexec -l vmlinuz-4.16.0-1-amd64 --append="root=/dev/sda1 console=ttyS0,115200 console=tty0 iomem=relaxed" --initrd=initrd.img-4.16.0-1-amd64"
echo "kexec -e"

recovery "Starte Shell"
